AdapterSoup: Weight Averaging to Improve Generalization of Pretrained Language Models

Alexandra Chronopoulou, Matthew Peters, Alexander Fraser, Jesse Dodge

Findings of EACL 2023

Pretrained language models (PLMs) are trained on massive corpora, but
often need to specialize to specific domains. A parameter-efficient
adaptation method suggests training an adapter for each domain on the
task of language modeling. This leads to good in-domain scores but can
be impractical for domain- or resource-restricted settings. A solution
is to use a related-domain adapter for the novel domain at test
time. In this paper, we introduce AdapterSoup, an approach that
performs weight-space averaging of adapters trained on different
domains. Our approach is embarrassingly parallel: first, we train a
set of domain-specific adapters; then, for each novel domain, we
determine which adapters should be averaged at test time. We present
extensive experiments showing that AdapterSoup consistently improves
performance to new domains without extra training. We also explore
weight averaging of adapters trained on the same domain with different
hyper-parameters, and show that it preserves the performance of a PLM
on new domains while obtaining strong in-domain results. We explore
various approaches for choosing which adapters to combine, such as
text clustering and semantic similarity. We find that using clustering
leads to the most competitive results on novel domains.
